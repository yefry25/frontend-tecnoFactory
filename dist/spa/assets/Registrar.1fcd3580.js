import{Q as E,a as I}from"./QCard.4bdcee3c.js";import{a as B,Q as V}from"./QInput.1d9eb8df.js";import{c as D,r as v,y as F,al as q,o as z,h as k,d as A,g as U,z as $,t as Q,f as M,M as N,ah as j,_ as O,X as K,ae as L,ab as w,a1 as c,Z as b,a3 as T,a4 as X,$ as Z,ag as G,a6 as H,a2 as J,a9 as W,aa as Y}from"./index.7ccb5a9e.js";import{a as ee}from"./axios.f1f32898.js";import{u as oe}from"./use-quasar.c4ead8f4.js";import"./use-dark.1d60d832.js";var te=D({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:f,emit:p}){const g=U(),l=v(null);let u=0;const n=[];function y(e){const o=typeof e=="boolean"?e:s.noErrorFocus!==!0,a=++u,r=(t,i)=>{p("validation"+(t===!0?"Success":"Error"),i)},R=t=>{const i=t.validate();return typeof i.then=="function"?i.then(d=>({valid:d,comp:t}),d=>({valid:!1,comp:t,err:d})):Promise.resolve({valid:i,comp:t})};return(s.greedy===!0?Promise.all(n.map(R)).then(t=>t.filter(i=>i.valid!==!0)):n.reduce((t,i)=>t.then(()=>R(i).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return a===u&&r(!0),!0;if(a===u){const{comp:i,err:d}=t[0];if(d!==void 0&&console.error(d),r(!1,i),o===!0){const P=t.find(({comp:C})=>typeof C.focus=="function"&&$(C.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function h(){u++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&Q(e);const o=u+1;y().then(a=>{o===u&&a===!0&&(s.onSubmit!==void 0?p("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function _(e){e!==void 0&&Q(e),p("reset"),M(()=>{h(),s.autofocus===!0&&s.noResetFocus!==!0&&m()})}function m(){B(()=>{if(l.value===null)return;const e=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),o=>o.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}N(j,{bindComponent(e){n.push(e)},unbindComponent(e){const o=n.indexOf(e);o>-1&&n.splice(o,1)}});let S=!1;return F(()=>{S=!0}),q(()=>{S===!0&&s.autofocus===!0&&m()}),z(()=>{s.autofocus===!0&&m()}),Object.assign(g.proxy,{validate:y,resetValidation:h,submit:x,reset:_,focus:m,getValidationComponents:()=>n}),()=>k("form",{class:"q-form",ref:l,onSubmit:x,onReset:_},A(f.default))}});const ae=s=>(W("data-v-befbb714"),s=s(),Y(),s),se={class:"row",style:{height:"90vh"}},ne={class:"flex flex-center col-12"},re=ae(()=>w("h4",{class:"q-mb-xs"},"Reg\xEDstrate",-1)),ie={__name:"Registrar",setup(s){const f=oe(),p=Z(),g=v(""),l=v(""),u=v(""),n=v(""),y=()=>{f.loading.show({message:"Doing something. Please wait...",spinnerColor:"primary"})},h=()=>{y(),ee.post("https://backend-tecno.vercel.app/api/usuario",{identificacion:g.value,nombre:l.value,correo:u.value,password:n.value}).then(o=>{p.push("/login"),console.log(o),f.notify({icon:"done",color:"positive",message:"Registro de usuario exitoso"}),f.loading.hide()}).catch(o=>{console.log(o),f.notify({color:"negative",message:"No se pudo registrar al usuario"}),f.loading.hide()})},x=[o=>o&&o.length>0||"Por favor digite un n\xFAmero de identificaci\xF3n",o=>o.length>8||"El n\xFAmero de identificaci\xF3n debe ser mayor a 8 caracteres"],_=[o=>o&&o.length>0||"Por favor digite su nombre completo"],m=[o=>o&&o.length>0||"Por favor escriba su correo"],S=[o=>o!==null&&o!==""||"Por favor escriba su contrase\xF1a",o=>o.length>7||"Debe tener 8 o mas d\xEDgitos "],e=v(!0);return(o,a)=>(K(),L("section",se,[w("article",ne,[c(E,{class:"text-center font",style:T([{"border-radius":"5%"},X(f).screen.lt.sm?{width:"90%"}:{width:"50%"}])},{default:b(()=>[c(I,{class:""},{default:b(()=>[re]),_:1}),c(I,null,{default:b(()=>[c(te,{onSubmit:G(h,["prevent","stop"])},{default:b(()=>[c(V,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=r=>g.value=r),label:"Digita tu n\xFAmero de identificaci\xF3n *","lazy-rules":"",rules:x},null,8,["modelValue"]),c(V,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value=r),label:"Digita tu nombre completo *","lazy-rules":"",rules:_},null,8,["modelValue"]),c(V,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=r=>u.value=r),type:"email",label:"Digita tu correo *","lazy-rules":"",rules:m},null,8,["modelValue"]),c(V,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=r=>n.value=r),type:e.value?"password":"text",label:"Digita tu contrase\xF1a *","lazy-rules":"",rules:S},{append:b(()=>[c(H,{name:e.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[3]||(a[3]=r=>e.value=!e.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),w("article",null,[c(J,{class:"full-width rounded bg-primary",type:"submit",label:"Registrar"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["style"])])]))}};var pe=O(ie,[["__scopeId","data-v-befbb714"]]);export{pe as default};
